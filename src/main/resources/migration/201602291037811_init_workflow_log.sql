--// Create workflow_log_channel


CREATE TABLE `workflow_log_channel` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `job_id` bigint(20) NOT NULL,
  `subjob_id` bigint(20) NOT NULL,
  `node_id` bigint(20) NOT NULL,
  `camp_id` bigint(20) NOT NULL,
  `channel_gateway_id` varchar(50) NOT NULL COMMENT '通道ID',
  `channel_type` int(11) NOT NULL COMMENT '渠道发送类型枚举-ChannelType',
  `createtime` datetime NOT NULL COMMENT '创建时间',
  `plan_starttime` datetime DEFAULT NULL COMMENT '计划开始时间',
  `plan_endtime` datetime DEFAULT NULL COMMENT '计划结束时间',
  `is_test_execute` tinyint(1) NOT NULL COMMENT '是否测试执行,true:测试执行，false:正式执行',
  `task_id` varchar(200) NOT NULL COMMENT '执行发送任务ID',
  `transfer_version` varchar(20) DEFAULT '6.0' COMMENT '系统版本号',
  PRIMARY KEY (`id`),
  KEY `idx_job_id` (`job_id`),
  KEY `idx_subjob_id` (`subjob_id`),
  KEY `idx_node_id` (`node_id`),
  KEY `idx_camp_id` (`camp_id`)
) ENGINE=InnoDB AUTO_INCREMENT=24135 DEFAULT CHARSET=utf8 COMMENT='渠道执行发送日志表';


CREATE TABLE `workflow_log_channel_user` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `job_id` bigint(20) NOT NULL,
  `subjob_id` bigint(20) NOT NULL,
  `node_id` bigint(20) NOT NULL,
  `subject_id` varchar(100) NOT NULL COMMENT '流转主题id',
  `uid` varchar(255) NOT NULL COMMENT '统一客户ID（当前主题流转主属性）',
  `info` varchar(255) COMMENT '当前节点发送属性值（例：短信：手机号，邮件：Email）',
  `createtime` datetime DEFAULT NULL COMMENT '创建时间',
  `transfer_version` varchar(20) DEFAULT '6.0' COMMENT '系统版本号',
  PRIMARY KEY (`id`,`subjob_id`),
  KEY `idx_job_id` (`job_id`),
  KEY `idx_subjob_id` (`subjob_id`),
  KEY `idx_node_id` (`node_id`),
  KEY `idx_info` (`info`),
  KEY `workflow_log_channel_user_subjob_id_uid` (`subjob_id`,`uid`),
  KEY `idx_created` (`createtime`),
  KEY `idx_uid` (`uid`)
) ENGINE=InnoDB AUTO_INCREMENT=367710543 DEFAULT CHARSET=utf8 COMMENT='用户渠道沟通日志表'
/*!50100 PARTITION BY RANGE (subjob_id)
(PARTITION p000 VALUES LESS THAN (60000) ENGINE = InnoDB,
 PARTITION p001 VALUES LESS THAN (70000) ENGINE = InnoDB,
 PARTITION p002 VALUES LESS THAN (80000) ENGINE = InnoDB,
 PARTITION p003 VALUES LESS THAN (90000) ENGINE = InnoDB,
 PARTITION p004 VALUES LESS THAN (100000) ENGINE = InnoDB,
 PARTITION p005 VALUES LESS THAN (110000) ENGINE = InnoDB,
 PARTITION p006 VALUES LESS THAN (120000) ENGINE = InnoDB,
 PARTITION p007 VALUES LESS THAN (130000) ENGINE = InnoDB,
 PARTITION p008 VALUES LESS THAN (140000) ENGINE = InnoDB,
 PARTITION p009 VALUES LESS THAN (150000) ENGINE = InnoDB,
 PARTITION p010 VALUES LESS THAN (160000) ENGINE = InnoDB,
 PARTITION p011 VALUES LESS THAN (170000) ENGINE = InnoDB,
 PARTITION p012 VALUES LESS THAN (180000) ENGINE = InnoDB,
 PARTITION p013 VALUES LESS THAN (190000) ENGINE = InnoDB,
 PARTITION p014 VALUES LESS THAN (200000) ENGINE = InnoDB,
 PARTITION p015 VALUES LESS THAN (210000) ENGINE = InnoDB,
 PARTITION p016 VALUES LESS THAN (220000) ENGINE = InnoDB,
 PARTITION p017 VALUES LESS THAN (230000) ENGINE = InnoDB,
 PARTITION p018 VALUES LESS THAN (240000) ENGINE = InnoDB,
 PARTITION p019 VALUES LESS THAN (250000) ENGINE = InnoDB,
 PARTITION p020 VALUES LESS THAN (260000) ENGINE = InnoDB,
 PARTITION p021 VALUES LESS THAN (270000) ENGINE = InnoDB,
 PARTITION p022 VALUES LESS THAN (280000) ENGINE = InnoDB,
 PARTITION p023 VALUES LESS THAN (290000) ENGINE = InnoDB,
 PARTITION p024 VALUES LESS THAN (300000) ENGINE = InnoDB,
 PARTITION p025 VALUES LESS THAN (310000) ENGINE = InnoDB,
 PARTITION p026 VALUES LESS THAN (320000) ENGINE = InnoDB,
 PARTITION p027 VALUES LESS THAN (330000) ENGINE = InnoDB,
 PARTITION p028 VALUES LESS THAN (340000) ENGINE = InnoDB,
 PARTITION p029 VALUES LESS THAN (350000) ENGINE = InnoDB,
 PARTITION p030 VALUES LESS THAN (360000) ENGINE = InnoDB,
 PARTITION p031 VALUES LESS THAN (370000) ENGINE = InnoDB,
 PARTITION p032 VALUES LESS THAN (380000) ENGINE = InnoDB,
 PARTITION p033 VALUES LESS THAN (390000) ENGINE = InnoDB,
 PARTITION p034 VALUES LESS THAN (400000) ENGINE = InnoDB,
 PARTITION p035 VALUES LESS THAN (410000) ENGINE = InnoDB,
 PARTITION p036 VALUES LESS THAN (420000) ENGINE = InnoDB,
 PARTITION p037 VALUES LESS THAN (430000) ENGINE = InnoDB,
 PARTITION p038 VALUES LESS THAN (440000) ENGINE = InnoDB,
 PARTITION p039 VALUES LESS THAN (450000) ENGINE = InnoDB,
 PARTITION p040 VALUES LESS THAN (460000) ENGINE = InnoDB,
 PARTITION p041 VALUES LESS THAN (470000) ENGINE = InnoDB,
 PARTITION p042 VALUES LESS THAN (480000) ENGINE = InnoDB,
 PARTITION p043 VALUES LESS THAN (490000) ENGINE = InnoDB,
 PARTITION p044 VALUES LESS THAN (500000) ENGINE = InnoDB,
 PARTITION p045 VALUES LESS THAN (510000) ENGINE = InnoDB,
 PARTITION p046 VALUES LESS THAN (520000) ENGINE = InnoDB,
 PARTITION p047 VALUES LESS THAN (530000) ENGINE = InnoDB,
 PARTITION p048 VALUES LESS THAN (540000) ENGINE = InnoDB,
 PARTITION p049 VALUES LESS THAN (550000) ENGINE = InnoDB,
 PARTITION p050 VALUES LESS THAN (560000) ENGINE = InnoDB,
 PARTITION p051 VALUES LESS THAN (570000) ENGINE = InnoDB,
 PARTITION p052 VALUES LESS THAN (580000) ENGINE = InnoDB,
 PARTITION p053 VALUES LESS THAN (590000) ENGINE = InnoDB,
 PARTITION p054 VALUES LESS THAN (600000) ENGINE = InnoDB,
 PARTITION p055 VALUES LESS THAN (610000) ENGINE = InnoDB,
 PARTITION p056 VALUES LESS THAN (620000) ENGINE = InnoDB,
 PARTITION p057 VALUES LESS THAN (630000) ENGINE = InnoDB,
 PARTITION p058 VALUES LESS THAN (640000) ENGINE = InnoDB,
 PARTITION p059 VALUES LESS THAN (650000) ENGINE = InnoDB,
 PARTITION p060 VALUES LESS THAN (660000) ENGINE = InnoDB,
 PARTITION p061 VALUES LESS THAN (670000) ENGINE = InnoDB,
 PARTITION p062 VALUES LESS THAN (680000) ENGINE = InnoDB,
 PARTITION p063 VALUES LESS THAN (690000) ENGINE = InnoDB,
 PARTITION p064 VALUES LESS THAN (700000) ENGINE = InnoDB,
 PARTITION p065 VALUES LESS THAN (710000) ENGINE = InnoDB,
 PARTITION p066 VALUES LESS THAN (720000) ENGINE = InnoDB,
 PARTITION p067 VALUES LESS THAN (730000) ENGINE = InnoDB,
 PARTITION p068 VALUES LESS THAN (740000) ENGINE = InnoDB,
 PARTITION p069 VALUES LESS THAN (750000) ENGINE = InnoDB,
 PARTITION p070 VALUES LESS THAN (760000) ENGINE = InnoDB,
 PARTITION p071 VALUES LESS THAN (770000) ENGINE = InnoDB,
 PARTITION p072 VALUES LESS THAN (780000) ENGINE = InnoDB,
 PARTITION p073 VALUES LESS THAN (790000) ENGINE = InnoDB,
 PARTITION p074 VALUES LESS THAN (800000) ENGINE = InnoDB,
 PARTITION p075 VALUES LESS THAN (810000) ENGINE = InnoDB,
 PARTITION p076 VALUES LESS THAN (820000) ENGINE = InnoDB,
 PARTITION p077 VALUES LESS THAN (830000) ENGINE = InnoDB,
 PARTITION p078 VALUES LESS THAN (840000) ENGINE = InnoDB,
 PARTITION p079 VALUES LESS THAN (850000) ENGINE = InnoDB,
 PARTITION p080 VALUES LESS THAN (860000) ENGINE = InnoDB,
 PARTITION p081 VALUES LESS THAN (870000) ENGINE = InnoDB,
 PARTITION p082 VALUES LESS THAN (880000) ENGINE = InnoDB,
 PARTITION p083 VALUES LESS THAN (890000) ENGINE = InnoDB,
 PARTITION p084 VALUES LESS THAN (900000) ENGINE = InnoDB,
 PARTITION p085 VALUES LESS THAN (910000) ENGINE = InnoDB,
 PARTITION p086 VALUES LESS THAN (920000) ENGINE = InnoDB,
 PARTITION p087 VALUES LESS THAN (930000) ENGINE = InnoDB,
 PARTITION p088 VALUES LESS THAN (940000) ENGINE = InnoDB,
 PARTITION p089 VALUES LESS THAN (950000) ENGINE = InnoDB,
 PARTITION p090 VALUES LESS THAN (960000) ENGINE = InnoDB,
 PARTITION p091 VALUES LESS THAN (970000) ENGINE = InnoDB,
 PARTITION p092 VALUES LESS THAN (980000) ENGINE = InnoDB,
 PARTITION p093 VALUES LESS THAN (990000) ENGINE = InnoDB,
 PARTITION p094 VALUES LESS THAN (1000000) ENGINE = InnoDB,
 PARTITION p100 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */;

  CREATE TABLE `metas_segmentation_model` (
  `model_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '元模型编号',
  `model_name` varchar(50) COLLATE utf8_bin NOT NULL COMMENT '元模型名称',
  `model_key` varchar(50) COLLATE utf8_bin NOT NULL COMMENT '元模型key',
  `is_enabled` tinyint(4) DEFAULT NULL COMMENT '是否启用,true:启动,false:不启用',
  PRIMARY KEY (`model_id`),
  UNIQUE KEY `idx_model_name` (`model_name`),
  UNIQUE KEY `idx_model_key` (`model_key`)
) ENGINE=InnoDB AUTO_INCREMENT=10001 DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='分组元模型';